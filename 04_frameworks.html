<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Web components</title>
  <meta name="author" content="Rogier van der Linde - ikdoeict.be">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="_lib/reveal/css/reveal.min.css">
	<link rel="stylesheet" href="_lib/reveal/css/theme/rogier.css" id="rogier">
	<link rel="stylesheet" href="_lib/highlight/vs.css">
	<link rel="stylesheet" href="css/common.css">
  <style>

    .reveal ul.chapterlist {
      column-count: 2;
      column-gap: 60px;
      -moz-column-count: 2;
      -moz-column-gap: 60px;
      -webkit-column-count: 2;
      -webkit-column-gap: 60px;
      padding-left: 20px;
      padding-bottom: 30px;
      display: block;
      width: 680px;
    }

    .demolink {
      margin-bottom: -20px !important;
      margin-top: -10px !important;
    }

  </style>
  <script>
    'use strict'
  </script>
</head>

<body>

  <!-- SLIDES -->
	<div class="reveal">

		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides">
			<section>
				<h1>Web components</h1>
				<small>use the arrow keys to navigate; press space for slide overview<br />
          examples will run best on <a href="https://www.google.nl/chrome/browser/canary.html" class="canary">Chrome Canary</a>
        </small>
				<figure>
					<img src="img/03_frameworks/polymer.png" alt="" width="180" />
					<figcaption></figcaption>
				</figure>

				<footer>
					<a href="http://www.ikdoeict.be/">ikdoeict.be</a> &mdash; <a href="mailto:rogier.vanderlinde@odisee.be">rogier.vanderlinde@odisee.be</a>
				</footer>
			</section>

      <section>
        <section>
          <h1>Web components</h1>
          <h2>web components</h2>
          <ul class="chapterlist">
            <!-- to be filled by Javascript -->
          </ul>
        </section>
        <section data-toc-title="Library | Framework | Toolkit">
          <h2>Library | Framework | Toolkit (1)</h2>
          <ul>
            <li>
              <em>library</em>: offers a loose bundle of tools and components you can salad-pick from
              <ul>
                <li>you start from your code and fill in the blanks with library components</li>
                <li>more work but more control</li>
              </ul>
            </li>
            <li>
              <em>framework</em>: offers a complete coding philosophy and methodology
              <ul>
                <li>you start from the framework's code and fill in the blanks with own code</li>
                <li>less work but less control</li>
              </ul>
            </li>
            <li>
              <em>toolkit</em>: not widely accepted term, but generally a set of libraries / functionality / components that are built to work together well
            </li>
          </ul>
        </section>
        <section data-toc-title="">
          <h2>Library | Framework | Toolkit (2)</h2>
          <ul>
            <li>
              Where would you place
              <ul>
                <li>jQuery?</li>
                <li>.NET?</li>
                <li>MVC?</li>
                <li>bootstrap?</li>
                <li>AngularJS?</li>
              </ul>
            </li>
            <li class="arrow">
              it's all about <em>level of control</em>
            </li>
          </ul>
        </section>
        <section data-toc-title="web components">
          <h2>web components (1)</h2>
          <ul>
            <li>
              especially in rich apps, we see this kind of <code>&lt;div&gt;</code> mess:
            </li>
          </ul>
          <img src="img/03_frameworks/google_mail.png" alt="" class="border" style="max-width: 80%" />
        </section>
        <section data-toc-title="">
          <h2>web components (2)</h2>
          <ul>
            <li>
              wouldn't it be nice if Gmail markup were like this (<a href="http://html5-demos.appspot.com/hangouts">online demo</a>)?
              <div><pre class="bigger"><code class="language-html" contenteditable>&lt;hangout-module&gt;
  &lt;hangout-chat from="Paul, Addy"&gt;
    &lt;hangout-discussion&gt;
      &lt;hangout-message from="Paul" profile="profile.png"
          profile="118075919496626375791" datetime="2013-07-17T12:02"&gt;
        &lt;p&gt;Feelin' this Web Components thing.&lt;/p&gt;
        &lt;p&gt;Heard of it?&lt;/p&gt;
      &lt;/hangout-message&gt;
      &lt;hangout-message from="Addy" profile="profile2.png"
          profile="118075919496626375791" datetime="2013-07-17T12:45"&gt;
        &lt;p&gt;Totes amazing&lt;/p&gt;
      &lt;/hangout-message&gt;
      &lt;hangout-message from="Paul" profile="profile.png"
          profile="118075919496626375791" datetime="2013-07-17T12:02"&gt;
          ...
      &lt;/hangout-message&gt;
    &lt;/hangout-discussion&gt;
  &lt;/hangout-chat&gt;
  &lt;hangout-chat&gt;...&lt;/hangout-chat&gt;
&lt;/hangout-module&gt;</code></pre></div>
            </li>
          </ul>
        </section>
        <section data-toc-title="">
          <h2>web components (3)</h2>
          <ul>
            <li>
              HTML5 offers some new elements (range input, video...)
            </li>
            <li>
              but: no matter how many new elements the W3C comes up with, we'll always need more
            </li>
            <li>
              what we need is a way to create <em>our own web components</em>
              <ul>
                <li>custom names</li>
                <li>encapsulated styles and behaviour</li>
                <li>reusable</li>
                <li>(optional) extending other elements</li>
              </ul>
            </li>
          </ul>
        </section>
        <section data-toc-title="">
          <h2>web components (4)</h2>
          <ul>
            <li>
              bad solutions:
              <ul class="x-style">
                <li>classic HTML/Javascript/CSS widgets (lack again semantics and no DOM encapsulation)</li>
                <li>different technology like <code>&lt;canvas&gt;</code> (not accessible, not indexable...)</li>
              </ul>
            </li>
            <li>
              <a href="https://www.w3.org/TR/components-intro/">W3C's web components</a> to the rescue! Consists of four parts:
              <ul>
                <li>custom elements</li>
                <li>shadow DOM</li>
                <li>templates</li>
                <li>packaging</li>
              </ul>
            </li>
          </ul>
          <div class="tooltip">
            <div>
              Lack of encapsulation from the DOM means that your widget might accidentally be modified by a script or CSS, ID attributes might overlap etc...
            </div>
          </div>
        </section>
        <section>
          <h2>unknown elements</h2>
          <ul>
            <li>
              what happens if you just use an unknown element?
              <div><pre class="bigger"><code class="language-css show-type" contenteditable>randomtag {
  display: inline-block;
  min-width: 200px;
  min-height: 30px;
  border: 1px dashed #009;
}
</code></pre></div>
              <div><pre class="bigger"><code class="language-html show-type" contenteditable>&lt;randomtag&gt;Lorem Ipsum&lt;/randomtag&gt;
</code></pre></div>
              <div><pre class="bigger"><code class="language-javascript show-type" contenteditable>document.querySelector('randomtag').addEventListener('click',
  () => console.log('ok'));
console.log(document.querySelector('randomtag').constructor.name);
</code></pre></div>
            </li>
          </ul>
          <div class="demolink"><a href="demos/03_frameworks/custom_elements/example1.html">demo</a></div>
          <ul>
            <li class="arrow">
              falls back to <code class="hl">HtmlUnkownElement</code> type (meaning: what you do is illegal)
            </li>
            <li class="arrow">
              you can still script and style it
            </li>
          </ul>
        </section>
        <section>
          <h2>custom elements</h2>
          <ul>
            <li>
              to create a custom element type, you must register it:
              <div><pre class="bigger"><code class="language-css show-type" contenteditable>rogier-quote {
  display: inline-block;
  min-width: 200px;
  min-height: 30px;
  border: 1px dashed #009;
}</code></pre></div>
              <div><pre class="bigger"><code class="language-html show-type" contenteditable>&lt;rogier-quote&gt;Lorem Ipsum&lt;/rogier-quote&gt;</code></pre></div>
              <div><pre class="bigger"><code class="language-javascript show-type" contenteditable>// register your new element
var RogierQuoteElement = document.registerElement('rogier-quote');
console.log(document.querySelector('rogier-quote').constructor.name);

// you can use its constructor now; e.g. create new quote
var newRogierQuote = new RogierQuoteElement();
newRogierQuote.innerHTML = 'sid amet';
document.body.appendChild(newRogierQuote);
</code></pre></div>
            </li>
          </ul>
          <div class="demolink"><a href="demos/03_frameworks/custom_elements/example2.html">demo</a></div>
          <ul>
            <li class="arrow">
              the custom name <i>must</i> contain a dash
            </li>
            <li class="arrow">
              you may use an element before registering; it will <a href="#">resolve</a> once it is registered
            </li>
          </ul>
        </section>
        <section>
          <h2>custom element prototype</h2>
          <ul>
            <li>
              to add custom methods and properties, define a prototype first:
              <div><pre class="bigger"><code class="language-javascript" contenteditable>// define new prototype based on HTMLElement
var RogierQuotePrototype = Object.create(HTMLElement.prototype);

// define a property on this prototype
Object.defineProperty(RogierQuotePrototype, 'hasQuotes', {
  value: true,
  writable : true
});

// define function on this prototype
RogierQuotePrototype.setText = function(txt) {
  this.innerHTML = this.hasQuotes ? '“' + txt + '”' : txt;
}

// register element with this prototype
var RogierQuoteElement = document.registerElement('rogier-quote', {
  prototype: RogierQuotePrototype
});

// create new quote
var newRogierQuote = new RogierQuoteElement();
newRogierQuote.hasQuotes = false;
newRogierQuote.setText('sid amet');
document.body.appendChild(newRogierQuote);
</code></pre></div>
            </li>
          </ul>
          <div class="demolink"><a href="demos/03_frameworks/custom_elements/example3.html">demo</a></div>
        </section>
        <section>
          <h2>custom element callbacks</h2>
          <ul>
            <li>
              there are a number of callbacks you can listen to:
              <ul>
                <li><em class="hl">createdCallback</em> – called when a custom element is created</li>
                <li><em class="hl">attachedCallback</em> – Called when a custom element is inserted into the DOM</li>
                <li><em class="hl">detachedCallback</em> – Called when a custom element is removed from the DOM</li>
                <li><em class="hl">attributeChangedCallback</em>(attrName, oldValue, newValue) – Called when an attribute on a custom element changes</li>
              </ul>
              <div><pre class="bigger"><code class="language-javascript" contenteditable>...
// quote is created callback
RogierQuotePrototype.createdCallback = function() {
  console.log('Rogier quote created');
};
...</code></pre></div>
            </li>
          </ul>
          <div class="demolink"><a href="demos/03_frameworks/custom_elements/example3.html">demo</a></div>
        </section>
        <section data-toc-title="custom element examples">
          <h2>custom element examples (1)</h2>
          <ul>
            <li>
              example 1: custom quote
              <div><pre class="bigger"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Custom element &mdash; basic example&lt;/title&gt;
  &lt;style&gt;
    rogier-quote {
      display: block;
      min-width: 200px;
      min-height: 30px;
      border: 2px ridge #009;
      background-color: #cce;
      float: left;
      clear: both;
      margin: 10px 0;
      padding: 5px 10px;
      border-radius: 10px;
      font-size: 20px;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;rogier-quote data-hasquotes&gt;&lt;/rogier-quote&gt;
  &lt;rogier-quote&gt;&lt;/rogier-quote&gt;
  &lt;rogier-quote data-nr="2"&gt;&lt;/rogier-quote&gt;
  &lt;script&gt;
    // define new prototype based on HTMLElement
    var RogierQuotePrototype = Object.create(HTMLElement.prototype);

    // define a property on this prototype
    Object.defineProperty(RogierQuotePrototype, 'hasQuotes', {
      value: true,
      writable : true
    });

    // define function on this prototype
    RogierQuotePrototype.setText = function(txt) {
      this.innerHTML = this.hasQuotes ? '“' + txt + '”' : txt;
    }

    // callback function overload
    RogierQuotePrototype.createdCallback = function() {
      this.hasQuotes = this.hasAttribute('data-hasquotes');
      console.log(this.hasQuotes);
      var quotes = [
        'beter één vogel in de hand dan 10 in andermans hand',
        'men moet een gegeven paard niet op de bek slaan',
        'hoe meer zielen, hoe zieliger'
      ];
      var nr = this.hasAttribute('data-nr') ? +this.getAttribute('data-nr') % 3 : Math.floor(Math.random() * 3);
      this.setText(quotes[nr]);
    };

    // register element with this prototype
    var RogierQuoteElement = document.registerElement('rogier-quote', {prototype: RogierQuotePrototype});

    // create new quote
    var newRogierQuote = new RogierQuoteElement();
    newRogierQuote.hasQuotes = false;
    newRogierQuote.setText('sid amet');
    document.body.appendChild(newRogierQuote);
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
            </li>
          </ul>
          <div class="demolink"><a href="demos/03_frameworks/custom_elements/example4.html">demo</a></div>
        </section>
        <section data-toc-title="">
          <h2>custom element examples (2)</h2>
          <ul>
            <li>
              example 2: custom button
              <div><pre class="bigger"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Test&lt;/title&gt;
  &lt;style&gt;

    rogier-button button {
      border: 0;
      cursor: pointer;
      background-color: #eaeff2;
      text-transform: uppercase;
      border-radius: 4px;
      box-shadow: inset 0 -3px #bbbfc2;
      color: #4d4e53;
      line-height: 35px;
      height: 35px;
      padding: 0 10px;
      outline: none;
    }

    rogier-button button:active {
      box-shadow: inset 0 -1px #bbbfc2;
      position: relative;
      top: 1px;
    }

    rogier-button img {
      vertical-align: middle;
      margin-right: 5px;
    }

  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;rogier-button data-text="Some Button" data-icon="v.png"&gt;&lt;/rogier-button&gt;
  &lt;script&gt;

    'use strict'

    // define new element prototype based on HTMLElement prototype
    var RogierButtonPrototype = Object.create(HTMLElement.prototype);

    // create content and behaviour
    RogierButtonPrototype.createdCallback = function() {
      // create content
      var btn = document.createElement('button');
      var img = document.createElement('img');
      img.src = this.getAttribute('data-icon');
      var txt = document.createTextNode(this.getAttribute('data-text'));
      btn.appendChild(img);
      btn.appendChild(txt);

      // create some behaviour
      btn.addEventListener('click', function(e) {
        if (confirm('are you sure you wanted to click me?')) {
          alert('ok, here you go')
        }
        e.preventDefault()
      });

      // add content
      this.appendChild(btn);
    };

    // register new element with tagname 'rogier-button'
    var RogierButton = document.registerElement('rogier-button', {
        prototype: RogierButtonPrototype
    });

  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
            </li>
          </ul>
          <div class="demolink"><a href="demos/03_frameworks/custom_elements/example5.html">demo</a></div>
        </section>
        <section>
          <h2>extending existing elements</h2>
          <ul>
            <li>
              you can also extend existing elements, e.g. <code class="hl">&lt;img&gt;</code>:
              <div><pre class="bigger"><code class="language-css show-type" contenteditable>img[is=thumb-img] {
  box-shadow: 10px 10px 10px rgba(100, 100, 100, 0.5);
}</code></pre></div>
              <div><pre class="bigger"><code class="language-html show-type" contenteditable>&lt;img is="thumb-img" src="photo.jpg" alt="me"&gt; &lt;!-- note the 'is' attribute --&gt;</code></pre></div>
              <div><pre class="bigger"><code class="language-javascript show-type" contenteditable>// extend HTMLImageElement
var ThumbImageProto = Object.create(HTMLImageElement.prototype);

// modify
ThumbImageProto.createdCallback = function() {
    this.width = '100';
    this.height = '100';
};

// register 'thumb-img' as extension of 'img'
var ThumbImage = document.registerElement('thumb-img', {
    prototype: ThumbImageProto,
    extends: 'img'
});
</code></pre></div>
            </li>
          </ul>
          <div class="demolink"><a href="demos/03_frameworks/custom_elements/example8.html">demo</a></div>
        </section>
      </section>

			<section data-index-title="">
				<section>
					<h2>Questions?</h2>
          <ul>
            <li>
              References:
              <ul>
                <li><a href="http://www.html5rocks.com/en/tutorials/webcomponents/customelements/">html5rocks.com &mdash; custom elements</a></li>
                <li><a href="https://css-tricks.com/modular-future-web-components/">css-tricks.com &mdash; a guide to web components</a></li>
              </ul>
            </li>
          </ul>
				</section>
			</section>

		</div>

		<!-- ikdoeict.be Link -->
		<a href="http://www.ikdoeict.be/" title="ikdoeict.be" id="ikdoeict">ikdoeict.be</a>

		<!-- Index Link -->
		<aside class="back">
	      <nav>
	        <p><a href="index.html">&larr; Back to index</a></p>
	      </nav>
		</aside>


		<!-- bottomleft links -->
		<ul id="extra">
		</ul>

	</div>

	<script src="_lib/jquery.min.js"></script>
	<script src="_lib/head.min.js"></script>
	<script src="_lib/reveal/reveal.min.js"></script>
	<script src="_lib/highlight/highlight.js"></script>
	<script src="_lib/prefixfree.js"></script>
	<script src="_lib/css-snippets.js"></script>
	<script src="_lib/css-edit.js"></script>
	<script src="_lib/incrementable.js"></script>
	<script src="_lib/main.js"></script>

</body>
</html>
